<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸ ê±´ê°•ì§€í‚´ì´ - ê±´ê°•ì •ë³´ íƒìƒ‰ì†Œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .tab {
            padding: 12px 25px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .tab:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .search-section {
            margin-bottom: 30px;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        input[type="text"] {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: transform 0.3s;
        }
        
        .btn:hover {
            transform: scale(1.05);
        }
        
        .btn-secondary {
            background: #4caf50;
        }
        
        .search-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-chip {
            padding: 8px 16px;
            background: #e8eaf6;
            border: 2px solid transparent;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .filter-chip.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .results-container {
            max-height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .medicine-card {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        
        .medicine-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .medicine-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .medicine-company {
            color: #666;
            margin-bottom: 15px;
        }
        
        .medicine-info {
            background: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .info-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }
        
        .search-history {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .history-item {
            padding: 10px;
            background: white;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .checklist {
            background: #f0f8ff;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .checklist h3 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.3em;
        }
        
        .checklist-item {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .checklist-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .symptom-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        
        .symptom-btn {
            padding: 15px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s;
        }
        
        .symptom-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .note-section {
            background: #fffbf0;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .note-item {
            padding: 15px;
            background: white;
            margin: 10px 0;
            border-radius: 8px;
            position: relative;
        }
        
        .note-date {
            color: #999;
            font-size: 0.9em;
        }
        
        .delete-note {
            position: absolute;
            right: 10px;
            top: 10px;
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .api-key-section {
            background: #fff3e0;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px dashed #ff9800;
        }
        
        .api-key-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ff9800;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
        }
        
        .stat-label {
            opacity: 0.9;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¥ ìŠ¤ë§ˆíŠ¸ ê±´ê°•ì§€í‚´ì´</h1>
            <p class="subtitle">ë¯¿ì„ ìˆ˜ ìˆëŠ” ê±´ê°•ì •ë³´ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!</p>
        </header>
        
        <div class="main-content">
            <!-- API í‚¤ ì…ë ¥ ì„¹ì…˜ -->
            <div class="api-key-section">
                <h3>âš ï¸ API í‚¤ ì„¤ì •</h3>
                <p>ê³µê³µë°ì´í„°í¬í„¸ì—ì„œ ë°œê¸‰ë°›ì€ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                <input type="text" class="api-key-input" id="apiKey" placeholder="ì—¬ê¸°ì— API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button class="btn" onclick="saveApiKey()" style="margin-top: 10px;">ì €ì¥</button>
            </div>
            
            <!-- íƒ­ ë©”ë‰´ -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('search')">ğŸ” ì˜ì•½í’ˆ ê²€ìƒ‰</button>
                <button class="tab" onclick="showTab('symptom')">ğŸ©º ì¦ìƒë³„ ì°¾ê¸°</button>
                <button class="tab" onclick="showTab('mynote')">ğŸ“ ë‚˜ì˜ ê±´ê°•ë…¸íŠ¸</button>
                <button class="tab" onclick="showTab('checklist')">âœ… ê±´ê°•ì •ë³´ ì²´í¬ë¦¬ìŠ¤íŠ¸</button>
                <button class="tab" onclick="showTab('stats')">ğŸ“Š í†µê³„ë³´ê¸°</button>
            </div>
            
            <!-- ì˜ì•½í’ˆ ê²€ìƒ‰ íƒ­ -->
            <div id="search" class="tab-content active">
                <div class="search-section">
                    <h2>ì˜ì•½í’ˆ ì •ë³´ ê²€ìƒ‰</h2>
                    <p style="color: #666; margin: 10px 0;">ì§‘ì— ìˆëŠ” ì•½ì˜ ì´ë¦„ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”!</p>
                    
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="ì˜ˆ: íƒ€ì´ë ˆë†€, ë¶€ë£¨íœ, ê²Œë³´ë¦° ë“±">
                        <button class="btn" onclick="searchMedicine()">ê²€ìƒ‰í•˜ê¸°</button>
                    </div>
                    
                    <div class="search-filters">
                        <span style="margin-right: 10px;">ë¹ ë¥¸ ê²€ìƒ‰:</span>
                        <div class="filter-chip" onclick="quickSearch('íƒ€ì´ë ˆë†€')">íƒ€ì´ë ˆë†€</div>
                        <div class="filter-chip" onclick="quickSearch('ë¶€ë£¨íœ')">ë¶€ë£¨íœ</div>
                        <div class="filter-chip" onclick="quickSearch('ê²Œë³´ë¦°')">ê²Œë³´ë¦°</div>
                        <div class="filter-chip" onclick="quickSearch('ì•„ìŠ¤í”¼ë¦°')">ì•„ìŠ¤í”¼ë¦°</div>
                    </div>
                    
                    <div id="searchResults" class="results-container" style="display: none;">
                        <!-- ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                    </div>
                    
                    <div class="search-history">
                        <h3>ìµœê·¼ ê²€ìƒ‰ ê¸°ë¡</h3>
                        <div id="searchHistory">
                            <p style="color: #999;">ì•„ì§ ê²€ìƒ‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì¦ìƒë³„ ì°¾ê¸° íƒ­ -->
            <div id="symptom" class="tab-content">
                <h2>ì¦ìƒë³„ ì˜ì•½í’ˆ ì°¾ê¸°</h2>
                <p style="color: #666; margin: 10px 0;">ì–´ë–¤ ì¦ìƒì´ ìˆë‚˜ìš”? í•´ë‹¹í•˜ëŠ” ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”!</p>
                
                <div class="symptom-buttons">
                    <button class="symptom-btn" onclick="searchBySymptom('ë‘í†µ')">ğŸ¤• ë‘í†µ</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ê°ê¸°')">ğŸ¤§ ê°ê¸°</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ì†Œí™”')">ğŸ¤¢ ì†Œí™”ë¶ˆëŸ‰</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ì•Œë ˆë¥´ê¸°')">ğŸ¤§ ì•Œë ˆë¥´ê¸°</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ê·¼ìœ¡í†µ')">ğŸ’ª ê·¼ìœ¡í†µ</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ê¸°ì¹¨')">ğŸ˜· ê¸°ì¹¨</button>
                    <button class="symptom-btn" onclick="searchBySymptom('ë¹„ì—¼')">ğŸ‘ƒ ë¹„ì—¼</button>
                    <button class="symptom-btn" onclick="searchBySymptom('í”¼ë¶€')">ğŸ©¹ í”¼ë¶€ì§ˆí™˜</button>
                </div>
                
                <div id="symptomResults" class="results-container" style="display: none;">
                    <!-- ì¦ìƒë³„ ê²€ìƒ‰ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ë‚˜ì˜ ê±´ê°•ë…¸íŠ¸ íƒ­ -->
            <div id="mynote" class="tab-content">
                <h2>ë‚˜ì˜ ê±´ê°•ë…¸íŠ¸</h2>
                <p style="color: #666; margin: 10px 0;">ê²€ìƒ‰í•œ ì˜ì•½í’ˆ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•´ë³´ì„¸ìš”!</p>
                
                <button class="btn btn-secondary" onclick="downloadNotes()">ğŸ“¥ ë…¸íŠ¸ ë‹¤ìš´ë¡œë“œ (TXT)</button>
                
                <div class="note-section">
                    <h3>ì €ì¥ëœ ì˜ì•½í’ˆ ì •ë³´</h3>
                    <div id="savedNotes">
                        <p style="color: #999;">ì•„ì§ ì €ì¥ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
                
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-number" id="searchCount">0</div>
                        <div class="stat-label">ì´ ê²€ìƒ‰ íšŸìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="savedCount">0</div>
                        <div class="stat-label">ì €ì¥ëœ ì•½í’ˆ</div>
                    </div>
                </div>
            </div>
            
            <!-- ê±´ê°•ì •ë³´ ì²´í¬ë¦¬ìŠ¤íŠ¸ íƒ­ -->
            <div id="checklist" class="tab-content">
                <h2>ì˜¬ë°”ë¥¸ ê±´ê°•ì •ë³´ ì„ íƒì„ ìœ„í•œ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
                
                <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3 style="color: #2e7d32; margin-bottom: 10px;">ğŸ¤” ê±´ê°•ì •ë³´ë€?</h3>
                    <p>ê±´ê°•ì •ë³´ëŠ” ìš°ë¦¬ì˜ ê±´ê°•ì„ ìœ ì§€í•˜ê³  ê°œì„ í•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ë§í•©ë‹ˆë‹¤. 
                    ì¸í„°ë„·ì—ëŠ” ìˆ˜ë§ì€ ê±´ê°•ì •ë³´ê°€ ìˆì§€ë§Œ, ëª¨ë“  ì •ë³´ê°€ ì •í™•í•˜ê³  ë¯¿ì„ ë§Œí•œ ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. 
                    ê·¸ë˜ì„œ ì˜¬ë°”ë¥¸ ê±´ê°•ì •ë³´ë¥¼ ì„ íƒí•˜ëŠ” ëŠ¥ë ¥ì´ ì¤‘ìš”í•´ìš”!</p>
                </div>
                
                <div class="checklist">
                    <h3>âœ… ê±´ê°•ì •ë³´ í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">1ï¸âƒ£ ì í•©ì„±</div>
                        <p>ì›í•˜ëŠ” ê±´ê°• ì •ë³´ì˜ ëª©ì ê³¼ ë‚´ìš©ì— ë§ëŠ”ê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ë‘í†µì•½ì„ ì°¾ëŠ”ë° ìœ„ì¥ì•½ ì •ë³´ê°€ ë‚˜ì˜¨ë‹¤ë©´ ì í•©í•˜ì§€ ì•Šì•„ìš”!</p>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">2ï¸âƒ£ ì‹ ë¢°ì„±</div>
                        <p>ì •ë³´ì˜ ì¶œì²˜ê°€ ì „ë¬¸ê°€, ë¹„ì˜ë¦¬ë‹¨ì²´ ë“±ìœ¼ë¡œ ë¯¿ì„ë§Œí•œê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ì‹ì•½ì²˜, ë³‘ì›, ì˜ì‚¬ ë“± ì „ë¬¸ê¸°ê´€ì˜ ì •ë³´ëŠ” ì‹ ë¢°í•  ìˆ˜ ìˆì–´ìš”!</p>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">3ï¸âƒ£ ì •í™•ì„±</div>
                        <p>ê³¼í•™ì  ê·¼ê±°ê°€ ìˆëŠ” ì •í™•í•œ ì •ë³´ì¸ê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ì—°êµ¬ê²°ê³¼ë‚˜ ì„ìƒì‹œí—˜ ë°ì´í„°ê°€ ìˆëŠ” ì •ë³´ê°€ ë” ì •í™•í•´ìš”!</p>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">4ï¸âƒ£ ìœ íš¨ì„±</div>
                        <p>í™œìš©í•  ê°€ì¹˜ê°€ ìˆëŠ” ì •ë³´ì¸ê°€? í•´ë‹¹ ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ ëª©ì í•˜ëŠ” íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ”ê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ì‹¤ì œë¡œ ë„ì›€ì´ ë˜ëŠ” ì‹¤ìš©ì ì¸ ì •ë³´ì¸ì§€ í™•ì¸í•´ë³´ì„¸ìš”!</p>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">5ï¸âƒ£ ìµœì‹ ì„±</div>
                        <p>ìµœì‹  ì •ë³´ì¸ê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ì˜í•™ ì •ë³´ëŠ” ê³„ì† ë°œì „í•˜ë¯€ë¡œ ìµœê·¼ ì—…ë°ì´íŠ¸ëœ ì •ë³´ê°€ ì¢‹ì•„ìš”!</p>
                    </div>
                    
                    <div class="checklist-item">
                        <div class="checklist-title">6ï¸âƒ£ ê²½ì œì„±</div>
                        <p>ì‹œê°„, ìì›, ë¹„ìš©, ë…¸ë ¥ ë“±ì„ ìµœì†Œí™”í•˜ë©´ì„œë„ ì›í•˜ëŠ” íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ”ê°€?</p>
                        <p style="color: #666; font-size: 0.9em; margin-top: 5px;">
                        ğŸ’¡ ì˜ˆì‹œ: ë„ˆë¬´ ë¹„ì‹¸ê±°ë‚˜ ë³µì¡í•œ ë°©ë²•ë³´ë‹¤ëŠ” ê°„ë‹¨í•˜ê³  íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”!</p>
                    </div>
                </div>
                
                <div style="background: #fff3e0; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h3 style="color: #f57c00;">ğŸ¯ ì´ ì‚¬ì´íŠ¸ì˜ ì •ë³´ëŠ” ë¯¿ì„ ìˆ˜ ìˆì–´ìš”!</h3>
                    <p>ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ì˜ì•½í’ˆ ì •ë³´ëŠ” <strong>ì‹í’ˆì˜ì•½í’ˆì•ˆì „ì²˜</strong>ì—ì„œ ì œê³µí•˜ëŠ” 
                    ê³µì‹ ë°ì´í„°ì…ë‹ˆë‹¤. ì •ë¶€ê¸°ê´€ì—ì„œ ê²€ì¦í•œ ì •í™•í•œ ì •ë³´ë§Œ ì œê³µí•˜ë¯€ë¡œ ì•ˆì‹¬í•˜ê³  í™œìš©í•˜ì„¸ìš”!</p>
                </div>
            </div>
            
            <!-- í†µê³„ íƒ­ -->
            <div id="stats" class="tab-content">
                <h2>ğŸ“Š ë‚˜ì˜ ê±´ê°•ì •ë³´ í™œìš© í†µê³„</h2>
                
                <div class="stats-cards">
                    <div class="stat-card">
                        <div class="stat-number" id="totalSearchStat">0</div>
                        <div class="stat-label">ì´ ê²€ìƒ‰ íšŸìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todaySearchStat">0</div>
                        <div class="stat-label">ì˜¤ëŠ˜ ê²€ìƒ‰ íšŸìˆ˜</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="savedMedicineStat">0</div>
                        <div class="stat-label">ì €ì¥ëœ ì˜ì•½í’ˆ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="mostSearchedStat">-</div>
                        <div class="stat-label">ê°€ì¥ ë§ì´ ê²€ìƒ‰í•œ ì•½</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <h3>ğŸ† ê±´ê°•ì •ë³´ ë§ˆìŠ¤í„° ë ˆë²¨</h3>
                    <div style="margin-top: 15px;">
                        <div id="userLevel" style="font-size: 1.5em; font-weight: bold; color: #667eea;">ì´ˆë³´ íƒìƒ‰ì</div>
                        <div style="background: #e0e0e0; height: 30px; border-radius: 15px; margin-top: 10px; overflow: hidden;">
                            <div id="levelProgress" style="background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; width: 0%; transition: width 0.5s;"></div>
                        </div>
                        <p style="margin-top: 10px; color: #666;">ê²€ìƒ‰ì„ ë§ì´ í• ìˆ˜ë¡ ë ˆë²¨ì´ ì˜¬ë¼ê°€ìš”!</p>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: #e8f5e9; border-radius: 10px;">
                    <h3>ğŸ“ˆ ê²€ìƒ‰ í‚¤ì›Œë“œ TOP 5</h3>
                    <div id="topKeywords" style="margin-top: 15px;">
                        <p style="color: #999;">ì•„ì§ ê²€ìƒ‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // API í‚¤ (ì—¬ê¸°ì— ì‹¤ì œ API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”)
        let API_KEY = localStorage.getItem('apiKey') || '';
        const API_URL = 'https://apis.data.go.kr/1471000/DrbEasyDrugInfoService/getDrbEasyDrugList';
        
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì´ˆê¸°í™”
        let searchHistory = JSON.parse(localStorage.getItem('searchHistory')) || [];
        let savedNotes = JSON.parse(localStorage.getItem('savedNotes')) || [];
        let searchStats = JSON.parse(localStorage.getItem('searchStats')) || {
            total: 0,
            today: 0,
            lastDate: new Date().toDateString(),
            keywords: {}
        };
        
        // API í‚¤ ì €ì¥
        function saveApiKey() {
            const key = document.getElementById('apiKey').value.trim();
            if (key) {
                API_KEY = key;
                localStorage.setItem('apiKey', key);
                alert('API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                document.querySelector('.api-key-section').style.display = 'none';
            } else {
                alert('API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = function() {
            if (API_KEY) {
                document.getElementById('apiKey').value = API_KEY;
                document.querySelector('.api-key-section').style.display = 'none';
            }
            updateSearchHistory();
            updateSavedNotes();
            updateStats();
        };
        
        // íƒ­ ì „í™˜
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab');
            const contents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }
        
        // ì˜ì•½í’ˆ ê²€ìƒ‰
        async function searchMedicine() {
            if (!API_KEY) {
                alert('ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const searchTerm = document.getElementById('searchInput').value.trim();
            if (!searchTerm) {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '<div class="loading"><div class="spinner"></div><p>ê²€ìƒ‰ ì¤‘...</p></div>';
            resultsDiv.style.display = 'block';
            
            try {
                const response = await fetch(`${API_URL}?serviceKey=${API_KEY}&itemName=${encodeURIComponent(searchTerm)}&type=json&numOfRows=10`);
                const data = await response.json();
                
                if (data.body && data.body.items) {
                    displayResults(data.body.items, resultsDiv);
                    addToSearchHistory(searchTerm);
                    updateSearchStats(searchTerm);
                } else {
                    resultsDiv.innerHTML = '<p style="text-align: center; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¡œ ì‹œë„í•´ë³´ì„¸ìš”.</p>';
                }
            } catch (error) {
                console.error('Error:', error);
                resultsDiv.innerHTML = '<p style="text-align: center; color: #ff0000;">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
            }
        }
        
        // ë¹ ë¥¸ ê²€ìƒ‰
        function quickSearch(term) {
            document.getElementById('searchInput').value = term;
            searchMedicine();
        }
        
        // ì¦ìƒë³„ ê²€ìƒ‰
        async function searchBySymptom(symptom) {
            if (!API_KEY) {
                alert('ë¨¼ì € API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            const resultsDiv = document.getElementById('symptomResults');
            resultsDiv.innerHTML = '<div class="loading"><div class="spinner"></div><p>ê²€ìƒ‰ ì¤‘...</p></div>';
            resultsDiv.style.display = 'block';
            
            try {
                const response = await fetch(`${API_URL}?serviceKey=${API_KEY}&efcyQesitm=${encodeURIComponent(symptom)}&type=json&numOfRows=10`);
                const data = await response.json();
                
                if (data.body && data.body.items) {
                    displayResults(data.body.items, resultsDiv);
                    updateSearchStats(symptom);
                } else {
                    resultsDiv.innerHTML = '<p style="text-align: center; color: #666;">í•´ë‹¹ ì¦ìƒì— ëŒ€í•œ ì˜ì•½í’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</p>';
                }
            } catch (error) {
                console.error('Error:', error);
                resultsDiv.innerHTML = '<p style="text-align: center; color: #ff0000;">ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
            }
        }
        
        // ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ
        function displayResults(items, container) {
            if (!items || items.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            let html = '';
            items.forEach(item => {
                html += `
                    <div class="medicine-card">
                        <div class="medicine-name">${item.itemName || 'ì œí’ˆëª… ì—†ìŒ'}</div>
                        <div class="medicine-company">ì œì¡°ì‚¬: ${item.entpName || 'ì •ë³´ ì—†ìŒ'}</div>
                        
                        ${item.efcyQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">ğŸ’Š íš¨ëŠ¥Â·íš¨ê³¼</div>
                            <p>${item.efcyQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.useMethodQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">ğŸ“‹ ì‚¬ìš©ë²•</div>
                            <p>${item.useMethodQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.atpnWarnQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">âš ï¸ ì£¼ì˜ì‚¬í•­</div>
                            <p>${item.atpnWarnQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.atpnQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">â— ì£¼ì˜ì‚¬í•­(ì¼ë°˜)</div>
                            <p>${item.atpnQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.intrcQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">ğŸ”„ ìƒí˜¸ì‘ìš©</div>
                            <p>${item.intrcQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.seQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">ğŸ˜· ë¶€ì‘ìš©</div>
                            <p>${item.seQesitm}</p>
                        </div>
                        ` : ''}
                        
                        ${item.depositMethodQesitm ? `
                        <div class="medicine-info">
                            <div class="info-title">ğŸ“¦ ë³´ê´€ë²•</div>
                            <p>${item.depositMethodQesitm}</p>
                        </div>
                        ` : ''}
                        
                        <button class="btn" onclick='saveToNotes(${JSON.stringify(item).replace(/'/g, "&#39;")})' style="margin-top: 15px;">
                            ğŸ’¾ ê±´ê°•ë…¸íŠ¸ì— ì €ì¥
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // ê²€ìƒ‰ ê¸°ë¡ ì¶”ê°€
        function addToSearchHistory(term) {
            const now = new Date();
            searchHistory.unshift({
                term: term,
                date: now.toLocaleString()
            });
            
            // ìµœëŒ€ 10ê°œê¹Œì§€ë§Œ ë³´ê´€
            if (searchHistory.length > 10) {
                searchHistory.pop();
            }
            
            localStorage.setItem('searchHistory', JSON.stringify(searchHistory));
            updateSearchHistory();
        }
        
        // ê²€ìƒ‰ ê¸°ë¡ ì—…ë°ì´íŠ¸
        function updateSearchHistory() {
            const historyDiv = document.getElementById('searchHistory');
            if (searchHistory.length === 0) {
                historyDiv.innerHTML = '<p style="color: #999;">ì•„ì§ ê²€ìƒ‰ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            let html = '';
            searchHistory.forEach(item => {
                html += `
                    <div class="history-item">
                        <span>${item.term}</span>
                        <span style="color: #999; font-size: 0.9em;">${item.date}</span>
                    </div>
                `;
            });
            
            historyDiv.innerHTML = html;
        }
        
        // ê±´ê°•ë…¸íŠ¸ì— ì €ì¥
        function saveToNotes(item) {
            const now = new Date();
            const noteItem = {
                ...item,
                savedDate: now.toLocaleString()
            };
            
            // ì¤‘ë³µ ì²´í¬
            const exists = savedNotes.some(note => note.itemName === item.itemName);
            if (exists) {
                alert('ì´ë¯¸ ì €ì¥ëœ ì˜ì•½í’ˆì…ë‹ˆë‹¤!');
                return;
            }
            
            savedNotes.push(noteItem);
            localStorage.setItem('savedNotes', JSON.stringify(savedNotes));
            updateSavedNotes();
            alert('ê±´ê°•ë…¸íŠ¸ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ì €ì¥ëœ ë…¸íŠ¸ ì—…ë°ì´íŠ¸
        function updateSavedNotes() {
            const notesDiv = document.getElementById('savedNotes');
            const savedCountSpan = document.getElementById('savedCount');
            
            if (savedNotes.length === 0) {
                notesDiv.innerHTML = '<p style="color: #999;">ì•„ì§ ì €ì¥ëœ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                savedCountSpan.textContent = '0';
                return;
            }
            
            savedCountSpan.textContent = savedNotes.length;
            
            let html = '';
            savedNotes.forEach((item, index) => {
                html += `
                    <div class="note-item">
                        <button class="delete-note" onclick="deleteNote(${index})">ì‚­ì œ</button>
                        <div class="note-date">${item.savedDate}</div>
                        <h4>${item.itemName}</h4>
                        <p>ì œì¡°ì‚¬: ${item.entpName || 'ì •ë³´ ì—†ìŒ'}</p>
                        ${item.efcyQesitm ? `<p><strong>íš¨ëŠ¥:</strong> ${item.efcyQesitm.substring(0, 100)}...</p>` : ''}
                    </div>
                `;
            });
            
            notesDiv.innerHTML = html;
        }
        
        // ë…¸íŠ¸ ì‚­ì œ
        function deleteNote(index) {
            if (confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                savedNotes.splice(index, 1);
                localStorage.setItem('savedNotes', JSON.stringify(savedNotes));
                updateSavedNotes();
            }
        }
        
        // ë…¸íŠ¸ ë‹¤ìš´ë¡œë“œ
        function downloadNotes() {
            if (savedNotes.length === 0) {
                alert('ì €ì¥ëœ ì˜ì•½í’ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            let content = '=== ë‚˜ì˜ ê±´ê°•ë…¸íŠ¸ ===\n';
            content += `ì‘ì„±ì¼: ${new Date().toLocaleString()}\n\n`;
            
            savedNotes.forEach((item, index) => {
                content += `\n--- ${index + 1}. ${item.itemName} ---\n`;
                content += `ì €ì¥ì¼: ${item.savedDate}\n`;
                content += `ì œì¡°ì‚¬: ${item.entpName || 'ì •ë³´ ì—†ìŒ'}\n`;
                if (item.efcyQesitm) content += `\níš¨ëŠ¥Â·íš¨ê³¼:\n${item.efcyQesitm}\n`;
                if (item.useMethodQesitm) content += `\nì‚¬ìš©ë²•:\n${item.useMethodQesitm}\n`;
                if (item.atpnWarnQesitm) content += `\nì£¼ì˜ì‚¬í•­:\n${item.atpnWarnQesitm}\n`;
                if (item.intrcQesitm) content += `\nìƒí˜¸ì‘ìš©:\n${item.intrcQesitm}\n`;
                if (item.seQesitm) content += `\në¶€ì‘ìš©:\n${item.seQesitm}\n`;
                if (item.depositMethodQesitm) content += `\në³´ê´€ë²•:\n${item.depositMethodQesitm}\n`;
                content += '\n' + '='.repeat(50) + '\n';
            });
            
            // íŒŒì¼ ë‹¤ìš´ë¡œë“œ
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `ê±´ê°•ë…¸íŠ¸_${new Date().toISOString().split('T')[0]}.txt`;
            link.click();
        }
        
        // ê²€ìƒ‰ í†µê³„ ì—…ë°ì´íŠ¸
        function updateSearchStats(keyword) {
            const today = new Date().toDateString();
            
            // ë‚ ì§œê°€ ë°”ë€Œì—ˆìœ¼ë©´ ì˜¤ëŠ˜ ì¹´ìš´íŠ¸ ë¦¬ì…‹
            if (searchStats.lastDate !== today) {
                searchStats.today = 0;
                searchStats.lastDate = today;
            }
            
            searchStats.total++;
            searchStats.today++;
            
            // í‚¤ì›Œë“œ ì¹´ìš´íŠ¸
            if (searchStats.keywords[keyword]) {
                searchStats.keywords[keyword]++;
            } else {
                searchStats.keywords[keyword] = 1;
            }
            
            localStorage.setItem('searchStats', JSON.stringify(searchStats));
            updateStats();
        }
        
        // í†µê³„ í™”ë©´ ì—…ë°ì´íŠ¸
        function updateStats() {
            // ì¹´ìš´í„° ì—…ë°ì´íŠ¸
            document.getElementById('searchCount').textContent = searchStats.total;
            document.getElementById('totalSearchStat').textContent = searchStats.total;
            document.getElementById('todaySearchStat').textContent = searchStats.today;
            document.getElementById('savedMedicineStat').textContent = savedNotes.length;
            
            // ê°€ì¥ ë§ì´ ê²€ìƒ‰í•œ ì•½
            let mostSearched = '-';
            let maxCount = 0;
            for (let key in searchStats.keywords) {
                if (searchStats.keywords[key] > maxCount) {
                    maxCount = searchStats.keywords[key];
                    mostSearched = key;
                }
            }
            document.getElementById('mostSearchedStat').textContent = mostSearched;
            
            // ë ˆë²¨ ê³„ì‚° (10íšŒ ê²€ìƒ‰ë§ˆë‹¤ ë ˆë²¨ì—…)
            const level = Math.floor(searchStats.total / 10);
            let levelText = 'ì´ˆë³´ íƒìƒ‰ì';
            let progress = (searchStats.total % 10) * 10;
            
            if (level >= 5) {
                levelText = 'ğŸ† ê±´ê°•ì •ë³´ ë§ˆìŠ¤í„°';
                progress = 100;
            } else if (level >= 3) {
                levelText = 'ğŸ’ ê±´ê°•ì •ë³´ ì „ë¬¸ê°€';
            } else if (level >= 2) {
                levelText = 'ğŸŒŸ ê±´ê°•ì •ë³´ íƒí—˜ê°€';
            } else if (level >= 1) {
                levelText = 'âœ¨ ê±´ê°•ì •ë³´ ìˆ˜ì§‘ê°€';
            }
            
            document.getElementById('userLevel').textContent = levelText;
            document.getElementById('levelProgress').style.width = progress + '%';
            
            // TOP 5 í‚¤ì›Œë“œ
            const sortedKeywords = Object.entries(searchStats.keywords)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);
            
            if (sortedKeywords.length > 0) {
                let keywordHtml = '';
                sortedKeywords.forEach((item, index) => {
                    const medal = index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `${index + 1}.`;
                    keywordHtml += `
                        <div style="padding: 10px; background: white; margin: 5px 0; border-radius: 5px; display: flex; justify-content: space-between;">
                            <span>${medal} ${item[0]}</span>
                            <span style="color: #667eea; font-weight: bold;">${item[1]}íšŒ</span>
                        </div>
                    `;
                });
                document.getElementById('topKeywords').innerHTML = keywordHtml;
            }
        }
    </script>
</body>
</html>
